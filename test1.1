<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>ğŸ± 100 à¹€à¸à¸¥à¸‡à¸•à¸²à¸¡à¸­à¸²à¸£à¸¡à¸“à¹Œ</title>

<style>
body{
  margin:0;
  font-family:sans-serif;
  background:linear-gradient(135deg,#ffe6f0,#e0f7fa);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}
.container{
  width:95%;
  max-width:650px;
  background:#fff;
  border-radius:25px;
  padding:25px;
  box-shadow:0 10px 30px rgba(0,0,0,.15);
}
.cat{text-align:center;font-size:80px}
h1{text-align:center;margin:5px 0}
.login{text-align:center;margin-bottom:10px}
.login button{
  background:#1db954;color:#fff;border:none;
  padding:8px 16px;border-radius:20px;cursor:pointer
}
.tabs{display:flex;justify-content:space-around;margin:15px 0}
.tabs button{
  border:none;border-radius:20px;padding:8px 14px;
  cursor:pointer;background:#ffe4f1
}
.tabs button.active{background:#ff8fab;color:#fff}
ul{list-style:none;padding:0;max-height:420px;overflow-y:auto}
li{
  display:flex;justify-content:space-between;
  align-items:center;margin:6px 0;font-size:13px
}
a{
  background:#1db954;color:#fff;text-decoration:none;
  padding:4px 10px;border-radius:12px;font-size:12px
}
</style>
</head>

<body>
<div class="container">
  <div class="cat" id="cat">ğŸ±</div>
  <h1>à¹à¸¡à¸§à¸„à¸±à¸”à¹€à¸à¸¥à¸‡à¹ƒà¸«à¹‰à¸„à¸¸à¸“</h1>

  <div class="login">
    <button onclick="loginSpotify()">ğŸ” Login Spotify</button>
  </div>

  <div class="tabs">
    <button onclick="loadMood('happy',this)" class="active">ğŸ˜º à¸ªà¸¸à¸‚</button>
    <button onclick="loadMood('chill',this)">ğŸ˜Œ à¸Šà¸´à¸¥</button>
    <button onclick="loadMood('love',this)">ğŸ˜ à¸£à¸±à¸</button>
    <button onclick="loadMood('sad',this)">ğŸ˜¿ à¹€à¸¨à¸£à¹‰à¸²</button>
  </div>

  <ul id="songs"></ul>
</div>

<script>
// ===== CONFIG =====
const CLIENT_ID = "YOUR_CLIENT_ID_HERE";
const REDIRECT_URI = "http://localhost:5500";
const AUTH_URL = "https://accounts.spotify.com/authorize";

// ===== TOKEN =====
let token = location.hash
  .substring(1)
  .split("&")
  .find(v=>v.startsWith("access_token"))
  ?.split("=")[1];

// ===== MOODS =====
const moods = {
  happy:{emoji:"ğŸ˜º",query:"à¹€à¸à¸¥à¸‡à¹„à¸—à¸¢ à¸ªà¸™à¸¸à¸ à¸ªà¸”à¹ƒà¸ª"},
  chill:{emoji:"ğŸ˜Œ",query:"à¹€à¸à¸¥à¸‡à¹„à¸—à¸¢ à¸Ÿà¸±à¸‡à¸ªà¸šà¸²à¸¢"},
  love:{emoji:"ğŸ˜",query:"à¹€à¸à¸¥à¸‡à¸£à¸±à¸à¹„à¸—à¸¢"},
  sad:{emoji:"ğŸ˜¿",query:"à¹€à¸à¸¥à¸‡à¹€à¸¨à¸£à¹‰à¸²à¹„à¸—à¸¢"}
};

// ===== LOGIN =====
function loginSpotify(){
  location.href =
    `${AUTH_URL}?client_id=${CLIENT_ID}`+
    `&redirect_uri=${REDIRECT_URI}`+
    `&response_type=token`;
}

// ===== LOAD 100 SONGS =====
async function loadMood(mood,btn){
  if(!token){ alert("à¸à¸£à¸¸à¸“à¸² Login Spotify à¸à¹ˆà¸­à¸™ ğŸ±"); return; }

  document.getElementById("cat").textContent = moods[mood].emoji;
  document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");

  const list = document.getElementById("songs");
  list.innerHTML = "ğŸ¾ à¹à¸¡à¸§à¸à¸³à¸¥à¸±à¸‡à¸„à¹‰à¸™à¹€à¸à¸¥à¸‡...";

  let results=[], offset=0;
  while(results.length<100){
    const res = await fetch(
      `https://api.spotify.com/v1/search?q=${encodeURIComponent(moods[mood].query)}&type=track&limit=50&offset=${offset}`,
      {headers:{Authorization:`Bearer ${token}`}}
    );
    const data = await res.json();
    if(!data.tracks.items.length) break;
    results.push(...data.tracks.items);
    offset+=50;
  }

  list.innerHTML="";
  results.slice(0,100).forEach((t,i)=>{
    const artist = t.artists.map(a=>a.name).join(", ");
    list.innerHTML += `
      <li>
        <span>${moods[mood].emoji} ${i+1}. ${t.name} â€“ ${artist}</span>
        <a href="${t.external_urls.spotify}" target="_blank">à¸Ÿà¸±à¸‡</a>
      </li>
    `;
  });
}
</script>
</body>
</html>
